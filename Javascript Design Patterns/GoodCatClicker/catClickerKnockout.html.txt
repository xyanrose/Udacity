<!DOCTYPE html>

<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script type="text/javascript">
			var catCounters = [];
			var cat = {
				name:"",
				url:"",
				clicks:0,
				index:-1
			}
			var liveCat = cat;
			var catSourceArr = ["catClickerCat.jpg","catClickerCat2.jpg","kittens.jpg"];
			var catNameArr = ["a", "b", "c"];
			$(function(){
				initializePage(catSourceArr.length);
			});
			function initializePage(numCats){
				setButtons(numCats);
				createCats(numCats, catSourceArr);
				hideCats();
				setCatCounts(numCats);
				closureThingButtons(numCats);
				closureThingPics(numCats);
				initializeAdmin();
				$("#adminForm").hide();

			}
			function setButtons(numButtons){
				for(var i = 0; i<numButtons; i++){
					$("#catName").append("<button>cat"+i+"</button>");
				}
			}
			function createCats(numCats, catSourceArr){
				for(var i = 0; i<numCats; i++){
					$("#catPic").append("<img id='catPic"+i+"'src ='"+catSourceArr[i]+"'>");
				}
			}
			function hideCats(){
				$("#catPic").children().each(function(){
					$(this).hide();
				});
			}0
			function disappearTheCat(catPicId){

				$("#"+catPicId).hide();
			}
			function appearTheCat(catPicId){
				$("#"+catPicId).show();
				$("#daCount").html("");

			}
			function setCatCounts(numCats){
				for(var i=0;i<numCats;i++){
					catCounters.push(0);
				}
			}
			function incrementTheCat(id){
				catCounters[id]++;
			}
			function setAdminForm(cat){
				$("#name").val(cat.name);
				$("#url").val(cat.url);
				$("#daClickCount").val(cat.clicks);
			}
			function closureThingButtons(numCats){
				
				$("#catName").children().each(function(index){//closure handled for me by index
					$(this).click(function(){
						hideCats();
						appearTheCat("catPic"+(index).toString());
						liveCat.name = catNameArr[index];
						liveCat.url = catSourceArr[index];
						liveCat.clicks = catCounters[index];
						liveCat.index = index;
						setAdminForm(liveCat);
					});
					
				});
			}
			function closureThingPics(numCats){
				
				$("#catPic").children().each(function(index){
					$(this).click(function(){
						incrementTheCat(index);
						$("#daCount").html(catCounters[index]);
					});
				});
			}
			function initializeAdmin(){
				$("#adminButton").click(function(){
					$("#adminForm").toggle();
				});
			}
			$(function(){
				$("#adminForm").submit(function(event){
					event.preventDefault();
					catNameArr[liveCat.index] = $("#name").val();
					catSourceArr[liveCat.index] = $("#url").val();
					catCounters[liveCat.index] = $("#daClickCount").val();
				});
			});
			
		</script>
	</head>
	<body>
		<div id="catName"></div>
		<div id="catPic"></div>
		<div id="daCount"></div>
		<br>
		<button id="adminButton">Admin</button>

		<form id="adminForm">
			<br>
			<div >
				<label style="float:left;">Name&nbsp;</label>
				<input id="name" />
			</div>
			<div >
				<label style="float:left;">URL&nbsp;</label>
				<input id="url"/>
			</div>
			<div>
				<label style="float:left;"># Clicks&nbsp;</label>
				<input id="daClickCount"/>
			</div>
			<div>
				<button type="submit">tist</button>
			</div>
		</form>
	</body>
</html>
